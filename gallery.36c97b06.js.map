{"mappings":"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","sources":["src/js/unsplash-api.js","<<jsx-config-pragma.js>>","src/templates/gallery-card.hbs","src/js/gallery.js"],"sourcesContent":["export class UnsplashApi {\n  static BASE_URL = 'https://api.unsplash.com';\n  static API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n\n  constructor() {\n    this.query = null;\n    this.page = 1;\n  }\n\n  fetchPhotosByQuery() {\n    const searchParams = new URLSearchParams({\n      query: this.query,\n      page: this.page,\n      per_page: 20,\n      orientation: 'portrait',\n      client_id: UnsplashApi.API_KEY,\n    });\n\n    return fetch(`${UnsplashApi.BASE_URL}/search/photos?${searchParams}`).then(\n      response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n\n        return response.json();\n      }\n    );\n  }\n}\n",null,"{{#each this}}\n<li class=\"gallery__item\">\n    <img src=\"{{this.urls.regular}}\" alt=\"{{this.alt_description}}\" class=\"gallery-img\">\n</li>\n{{/each}}","// https://unsplash.com/\nimport { UnsplashApi } from './unsplash-api';\nimport createGalleryCards from '../templates/gallery-card.hbs';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\nconst unsplashApi = new UnsplashApi();\n\nconsole.log(unsplashApi);\n\nconst onSearchFormSubmit = event => {\n  event.preventDefault();\n\n  const { target: formEl } = event;\n\n  unsplashApi.query = formEl.elements.user_search_query.value;\n  unsplashApi.page = 1;\n\n  unsplashApi\n    .fetchPhotosByQuery()\n    .then(data => {\n      if (data.total === 0) {\n        galleryEl.innerHTML = '';\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        return;\n      }\n\n      if (data.total_pages === 1) {\n        galleryEl.innerHTML = createGalleryCards(data.results);\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        return;\n      }\n\n      galleryEl.innerHTML = createGalleryCards(data.results);\n\n      loadMoreBtnEl.classList.remove('is-hidden');\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nconst onLoadMoreBtnClick = event => {\n  unsplashApi.page += 1;\n\n  unsplashApi\n    .fetchPhotosByQuery()\n    .then(data => {\n      galleryEl.insertAdjacentHTML(\n        'beforeend',\n        createGalleryCards(data.results)\n      );\n\n      if (unsplashApi.page === data.total_pages) {\n        loadMoreBtnEl.classList.add('is-hidden');\n      }\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["$8MBJY","parcelRequire","$9a998f27fa6e7b02$export$3f0c69c065e5b121","UnsplashApi","this","query","page","key","searchParams","URLSearchParams","per_page","orientation","client_id","API_KEY","fetch","concat","BASE_URL","then","response","ok","Error","status","json","$parcel$interopDefault","$hKHmD","$5e7491bd6e013c7b$export$2e2bcd8739ae039","template","container","depth0","helpers","partials","data","stack1","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","compiler","main","nullContext","name","hash","fn","program","inverse","noop","loc","start","line","column","end","useData","$6756f0db6f988caf$var$searchFormEl","document","querySelector","$6756f0db6f988caf$var$galleryEl","$6756f0db6f988caf$var$loadMoreBtnEl","$6756f0db6f988caf$var$unsplashApi","console","log","addEventListener","event","preventDefault","formEl","target","elements","user_search_query","value","fetchPhotosByQuery","total","innerHTML","classList","add","total_pages","results","remove","catch","err","insertAdjacentHTML"],"version":3,"file":"gallery.36c97b06.js.map"}