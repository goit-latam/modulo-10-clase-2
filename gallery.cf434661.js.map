{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAAO,MAAMC,EASXC,qBACE,MAAMC,EAAe,IAAIC,gBAAgB,CACvCC,MAAOC,KAAKD,MACZE,KAAMD,KAAKC,KACXC,SAAU,GACVC,YAAa,WACbC,UAAWT,EAAYU,UAGzB,OAAOC,MAAM,GAAGX,EAAYY,0BAA0BV,KAAgBW,MACpEC,IACE,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAG3B,OAAOH,EAASI,UApBtBC,cACEd,KAAKD,MAAQ,KACbC,KAAKC,KAAO,GALdc,EAAAtB,EAAA,CADWE,EACJ,WAAW,4BAClBoB,EAAAtB,EAAA,CAFWE,EAEJ,UAAU,+C,ICuBfqB,EAvByBD,EADzBrB,EAAA,UACoCuB,SAAS,CAAC,EAAI,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GAC7F,IAAIC,EAAQC,EAAON,EAAUO,OAAQC,EAAOR,EAAUS,iBAAkBC,EAAiBV,EAAUU,gBAAkB,SAASC,EAAQC,GAClI,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,6CACHJ,EAAOF,EAAgF,OAAvED,EAAoB,MAAVJ,EAAiBS,EAAeT,EAAO,QAAUA,GAAmBS,EAAeL,EAAO,WAAaA,EAASJ,IAC1I,UACAO,EAAOF,EAAkB,MAAVL,EAAiBS,EAAeT,EAAO,mBAAqBA,EAASA,IACpF,mCACJgB,SAAW,CAAC,EAAE,YAAYC,KAAO,SAASlB,EAAUC,EAAOC,EAAQC,EAASC,GAC1E,IAAIC,EAON,OAA8R,OAArRA,GAPsBL,EAAUU,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAKWV,EAAQ,QAAQc,KAAe,MAAVf,EAAiBA,EAAUD,EAAUmB,aAAe,GAAIlB,EAAO,CAACmB,KAAO,OAAOC,KAAO,GAAGC,GAAKtB,EAAUuB,QAAQ,EAAGnB,EAAM,GAAGoB,QAAUxB,EAAUyB,KAAKrB,KAAOA,EAAKsB,IAAM,CAACC,MAAQ,CAACC,KAAO,EAAEC,OAAS,GAAGC,IAAM,CAACF,KAAO,EAAEC,OAAS,OAAiBxB,EAAS,IAC9S0B,SAAU,ICpBZ,MAAMC,EAAeC,SAASC,cAAc,mBACtCC,EAAYF,SAASC,cAAc,eACnCE,EAAgBH,SAASC,cAAc,iBAEvCG,EAAc,IAAI5D,EAExB6D,QAAQC,IAAIF,GAwDZL,EAAaQ,iBAAiB,UAtDHC,IACzBA,EAAMC,iBAEN,MAAQC,OAAQC,GAAWH,EAE3BJ,EAAYxD,MAAQ+D,EAAOC,SAASC,kBAAkBC,MACtDV,EAAYtD,KAAO,EAEnBsD,EACG3D,qBACAY,MAAKc,GACe,IAAfA,EAAK4C,OACPb,EAAUc,UAAY,QACtBb,EAAcc,UAAUC,IAAI,cAKL,IAArB/C,EAAKgD,aACPjB,EAAUc,UAAYnD,EAAmBM,EAAKiD,cAC9CjB,EAAcc,UAAUC,IAAI,eAK9BhB,EAAUc,UAAYnD,EAAmBM,EAAKiD,cAE9CjB,EAAcc,UAAUI,OAAO,gBAEhCC,OAAMC,IACLlB,QAAQC,IAAIiB,SAyBlBpB,EAAcI,iBAAiB,SArBJC,IACzBJ,EAAYtD,MAAQ,EAEpBsD,EACG3D,qBACAY,MAAKc,IACJ+B,EAAUsB,mBACR,YACA3D,EAAmBM,EAAKiD,UAGtBhB,EAAYtD,OAASqB,EAAKgD,aAC5BhB,EAAcc,UAAUC,IAAI,gBAG/BI,OAAMC,IACLlB,QAAQC,IAAIiB","sources":["src/js/unsplash-api.js","src/templates/gallery-card.hbs","src/js/gallery.js"],"sourcesContent":["export class UnsplashApi {\n  static BASE_URL = 'https://api.unsplash.com';\n  static API_KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n\n  constructor() {\n    this.query = null;\n    this.page = 1;\n  }\n\n  fetchPhotosByQuery() {\n    const searchParams = new URLSearchParams({\n      query: this.query,\n      page: this.page,\n      per_page: 20,\n      orientation: 'portrait',\n      client_id: UnsplashApi.API_KEY,\n    });\n\n    return fetch(`${UnsplashApi.BASE_URL}/search/photos?${searchParams}`).then(\n      response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n\n        return response.json();\n      }\n    );\n  }\n}\n","{{#each this}}\n<li class=\"gallery__item\">\n    <img src=\"{{this.urls.regular}}\" alt=\"{{this.alt_description}}\" class=\"gallery-img\">\n</li>\n{{/each}}","// https://unsplash.com/\nimport { UnsplashApi } from './unsplash-api';\nimport createGalleryCards from '../templates/gallery-card.hbs';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\n\nconst unsplashApi = new UnsplashApi();\n\nconsole.log(unsplashApi);\n\nconst onSearchFormSubmit = event => {\n  event.preventDefault();\n\n  const { target: formEl } = event;\n\n  unsplashApi.query = formEl.elements.user_search_query.value;\n  unsplashApi.page = 1;\n\n  unsplashApi\n    .fetchPhotosByQuery()\n    .then(data => {\n      if (data.total === 0) {\n        galleryEl.innerHTML = '';\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        return;\n      }\n\n      if (data.total_pages === 1) {\n        galleryEl.innerHTML = createGalleryCards(data.results);\n        loadMoreBtnEl.classList.add('is-hidden');\n\n        return;\n      }\n\n      galleryEl.innerHTML = createGalleryCards(data.results);\n\n      loadMoreBtnEl.classList.remove('is-hidden');\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nconst onLoadMoreBtnClick = event => {\n  unsplashApi.page += 1;\n\n  unsplashApi\n    .fetchPhotosByQuery()\n    .then(data => {\n      galleryEl.insertAdjacentHTML(\n        'beforeend',\n        createGalleryCards(data.results)\n      );\n\n      if (unsplashApi.page === data.total_pages) {\n        loadMoreBtnEl.classList.add('is-hidden');\n      }\n    })\n    .catch(err => {\n      console.log(err);\n    });\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["$iJYdK","parcelRequire","$9dbbbc7022265b41$export$3f0c69c065e5b121","fetchPhotosByQuery","searchParams","URLSearchParams","query","this","page","per_page","orientation","client_id","API_KEY","fetch","BASE_URL","then","response","ok","Error","status","json","constructor","$parcel$interopDefault","$8e597eea96aec3db$export$2e2bcd8739ae039","template","container","depth0","helpers","partials","data","stack1","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","compiler","main","nullContext","name","hash","fn","program","inverse","noop","loc","start","line","column","end","useData","$7c59f4ec4043ce00$var$searchFormEl","document","querySelector","$7c59f4ec4043ce00$var$galleryEl","$7c59f4ec4043ce00$var$loadMoreBtnEl","$7c59f4ec4043ce00$var$unsplashApi","console","log","addEventListener","event","preventDefault","target","formEl","elements","user_search_query","value","total","innerHTML","classList","add","total_pages","results","remove","catch","err","insertAdjacentHTML"],"version":3,"file":"gallery.cf434661.js.map"}